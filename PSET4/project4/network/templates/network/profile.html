{% extends "network/layout.html" %}
{% load static %}

{% block body %}
<div class="profile">
    <div>
    <h3 class="username"> {{owner}} </h3>
    {% if user.is_authenticated and user.id != owner.id%}
        <button id="follow" data-user-id={{owner.id}}>
            {% if is_following %} Unfollow {% else %} Follow {% endif %}
        </button>
    {% elif not user.is_authenticated %}
        <button disabled data-tooltip="You must be logged in"> Follow </button>
    {% endif %}
    </div>
    <a> {{owner.following}}Following </a>
    <a> {{owner.followers}}Followers </a>
</div>


<div class="feed">
    {% if user.is_authenticated and user.id == owner.id%}
        <div class="post-container">
            <div class="new-post">
                <h4> New post </h4>
                <form id="post-form">
                    <textarea id="post-content" name="post-content"> </textarea>
                    <button type="submit"> Post </button>
                </form>
            </div>
        </div>
    {% endif %}
    {% for post in posts%}
    <div class="post" data-post-id="{{ post.id }}"> 
        <div>
            <b> {{owner}} </b>
            <span> {{post.timestamp}} </span>
        </div>
        <pre class="post-body" >{{post.body}}</pre> 
        {% if user.is_authenticated and user.id == owner.id%}
                <button class="edit-button" data-post-id="{{ post.id }}"> Edit </button>
        {% endif %}
    </div>
    {% endfor %}
</div>


{% endblock %}

{% block script %}
    <script src="{% static 'network/file.js' %}?v={% now 'U' %}"></script>
{% endblock %}